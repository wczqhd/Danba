<template name="audio">
  <audio src="{{ item.msg.url }}" controls="" autoplay="" />
</template>
<chat-suit-audio
   id="chat-suit-audio"
   chatType="{{ chatType }}"
   bind:newAudioIndexMsg="saveSendMsg"></chat-suit-audio>

<import src="../../templates/copyright.wxml" />
<import src="../../templates/loading.wxml" />



<view class="bg-{{skinStyle}}-page"></view>
<view class="bg-{{skinStyle}}" style="width:100%;height:100%;"> </view>
<view class="cu-custom " style="padding-top:{{StatusBar}}px;height:{{CustomBar}}px">
  <view class="cu-bar fixed bg-{{skinStyle}} navborder" style="height:{{CustomBar}}px;padding-top:{{StatusBar}}px;{{bgImage?'background-image:url(' + bgImage+')':''}}">
    <!--<view class="action" bindtap="BackPage">
			<weather size="xs" theme="light" />
		</view>-->

    <view class="content" style="top:{{StatusBar}}px">
      <view slot="content ">蛋吧</view>
    </view>

  </view>
</view>


<view style="display:{{showallDisplay}}">
  <!-- 图标导航和搜索 -->

  <!-- 文章列表 -->
  <view class="container">
    <!-- 列表template模板 -->
    <block wx:for="{{groupList}}" wx:key="id">
      <!--<view class="cu-card case  " index="{{index}}" id="{{item.id}}" bindtap="redict{{item.format}}" wx:if="{{index%6==2}}">-->
      <view class="cu-card case  " index="{{index}}" id="{{item.id}}" bindtap="_selectItemRank"    data-data="{{item}}">

        <!--<view class="cu-item  bg-{{skinStyle}}-item   shadow" wx:if="{{item.post_thumbnail_image == null || item.post_thumbnail_image == ''}}">
        </view>

        <view class="cu-item  bg-{{skinStyle}}-item   shadow" wx:else="">-->
        <view class="cu-item  bg-{{skinStyle}}-item   shadow" >
          <view class="cu-card dynamic {{isCard?'no-card':''}}">
            <view class="cu-item shadow">

              <view class="cu-list menu-avatar">
                <view class="cu-item">
                  <view class="cu-avatar round lg" style="background-image:url({{item.avatarurl}});"></view>

                  <view class="content flex-sub">
                    <view>{{item.groupname}}</view>
                    <view class="text-gray text-sm flex justify-between">
                     <!-- {{item.post_date}}-->
                     {{item.owner}}
                    </view>
                  </view>
                </view>
              </view>
              <view class="text-content text-cut">
                {{item.describe}}
              </view>
              <view class="grid flex-sub padding-lr {{isCard?'col-3 grid-square':'col-1'}}">

                <view class="bg-img {{isCard?'':'only-img'}}" wx:if="{{item.post_thumbnail_image != '11'}}" style="background-image:url({{item.post_thumbnail_image}});"  wx:key="index">

                </view>

              </view>
              <view class="text-gray text-sm text-right padding">
                <text class="cuIcon-notificationfill margin-lr-xs"></text> {{item.listen_count}}
                <text class="cuIcon-appreciatefill margin-lr-xs"></text> {{item.like_count}}
                <text class="cuIcon-messagefill margin-lr-xs"></text> {{item.total_comments}}
              </view>
              <view class=" padding-sm margin-xs radius">
                  <button class="cu-btn block round bg-green margin-tb-sm " catchtap="clickJoinAudio" data-data="{{item.hotmsg}}">
                    <text class="cuIcon-voicefill">点这里也说一段！</text>
                  </button>
                </view>
                <view class="padding solids">热门声音
              <view class="cu-list menu-avatar">
                <view class="cu-item">
                  <view class="cu-avatar round lg" style="background-image:url({{item.hotmsg.avatarUrl}});"></view>
                  <view class="content flex-sub">
                    <view class="text-grey">{{item.hotmsg.nickname}}</view>
                    <view class="text-gray text-sm flex justify-between">
                      {{item.hotmsg.post_date}}
                      <view class="text-gray text-sm">

                        <text class="cuIcon-notificationfill margin-lr-xs"></text> 播放{{item.hotmsg.listencount}}次

                      </view>
                    </view>
                  </view>
                </view>
              </view>
              <view class="bg-green round padding flex flex-direction"  catchtap="togglePlayAudio" data-data="{{item.hotmsg}}">

                <audio-msg
                               wx:if="{{item.hotmsg != null}}"
                                 msg="{{ item.hotmsg }}"></audio-msg>

              </view>
              <view class="flex solid-bottom padding justify-center">
                <view class=" padding-sm margin-xs radius">
                  <button class="cu-btn block round lines-green margin-tb-sm " catchtap="clickLike" data-data="{{item.hotmsg}}">
                    <text class="cuIcon-appreciatefill">{{item.hotmsg.likecount}}赞</text>
                  </button>
                </view>
                
                <view class=" padding-sm margin-xs radius">
                  <button class="cu-btn  round lines-green margin-tb-sm " catchtap="clickShare" data-data="{{item.hotmsg}}"  open-type= "share">
                    <text class="cuIcon-share">{{item.hotmsg.sharecount}}转发</text>
                  </button>
                </view>
              </view>
              </view>
            </view>
          </view>


        </view>


      </view>


      <!--<view class="cu-card case " index="{{index}}" wx:elif="{{index%6==5 && item.listAdId !=''  && listAdsuccess }}">
        <view class="cu-item  bg-{{skinStyle}}-item shadow">
          <ad unit-id="{{item.videoAdId}}" ad-type="video" ad-theme="white" binderror="adbinderror"></ad>
        </view>
      </view>-->





    </block>
    <view style='display:{{isLoading?"block":"none"}}'>
      <template is="tempLoading" />
    </view>
    <!-- 无更多文章提示 -->
    <view class="loadingmore" style="display:{{floatDisplay}}">

      <view class="no-more" hidden="{{!isLastPage}}">- 无更多文章 -</view>
    </view>
    <!-- 版权信息template模板 -->
    <view class="copyright" style="display:{{floatDisplay}}">
      <template is="tempCopyright" data="{{webSiteName:webSiteName,domain:domain}}" />
    </view>
  </view>
</view>

<!-- 无法访问网络 -->
<view class="showerror" style="display:{{showerror}}">
  <text class=" cuIcon-warn lg text-grey" style="height:50px;width:50px;font-size:48px;"   catchtap="exit"></text>
  <view class="errortext">
    暂时无法访问网络，下拉重试...
  </view>
</view>